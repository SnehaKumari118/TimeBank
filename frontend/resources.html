<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Learning Resources | TimeBank</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gradient-to-br from-indigo-50 to-gray-100 min-h-screen">

<!-- Navbar -->
<nav class="bg-indigo-600 text-white shadow-md">
  <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
     <h1 class="text-2xl font-bold flex items-center gap-2 cursor-pointer"
        onclick="location.href='dashboard.html'">
      <svg class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
      </svg>
      TimeBank
    </h1>

    <div class="hidden md:flex gap-6">
      <a href="dashboard.html" class="hover:text-indigo-200">Dashboard</a>
      <a href="upload-resource.html" class="hover:text-indigo-200">Upload</a>
    </div>

    <button class="md:hidden text-3xl" onclick="toggleMenu()">â˜°</button>
  </div>

  <!-- Mobile Menu -->
  <div id="mobileMenu" class="hidden bg-indigo-700 px-4 pb-4 space-y-2">
    <a href="dashboard.html" class="block">Dashboard</a>
    <a href="upload-resource.html" class="block">Upload</a>
  </div>
</nav>

<!-- Page Content -->
<div class="max-w-7xl mx-auto px-4 py-8">

  <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center gap-2">
    ðŸ“š Learning Resources
  </h2>
  

  <!-- Resources Grid -->
  <div id="list"
    class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 items-start">
  </div>

</div>

<script>
const API = "http://localhost:3000";


function toggleMenu() {
  document.getElementById("mobileMenu").classList.toggle("hidden");
}

fetch(API + "/resources")
  .then(res => res.json())
  .then(data => {
    document.getElementById("list").innerHTML = data.map(r => `
      <div class="bg-white rounded-2xl shadow hover:shadow-lg transition flex flex-col overflow-hidden">

        <!-- Header -->
        <div class="p-4">
          <h3 class="font-bold text-lg text-gray-800 truncate">${r.title}</h3>
          <p class="text-sm text-gray-500">${r.description || ""}</p>
          <p class="text-xs text-indigo-600 mt-1">By ${r.name}</p>
        </div>

        <!-- Preview (CLICK TO OPEN FULLSCREEN) -->
        <a
          href="${API}/uploads/${r.file_path}"
          target="_blank"
          class="px-4 block cursor-pointer"
          title="Open fullscreen"
        >
          ${
            r.file_type === "video"
              ? `
                <div class="h-48 bg-black rounded-lg overflow-hidden relative">
                  <video
                    class="w-full h-full object-cover pointer-events-none"
                    muted
                  >
                    <source src="${API}/uploads/${r.file_path}">
                  </video>

                  <!-- Play Overlay -->
                  <div class="absolute inset-0 flex items-center justify-center bg-black/40">
                    <span class="text-white text-4xl">â–¶</span>
                  </div>
                </div>
              `
              : r.file_type === "pdf"
              ? `
                <div class="h-48 border rounded-lg overflow-hidden relative">
                  <iframe
                    src="${API}/uploads/${r.file_path}"
                    class="w-full h-full pointer-events-none"
                  ></iframe>

                  <!-- Open Overlay -->
                  <div class="absolute inset-0 flex items-center justify-center bg-black/30">
                    <span class="text-white font-semibold">Open PDF</span>
                  </div>
                </div>
              `
              : `
                <div class="h-48 flex items-center justify-center text-gray-400">
                  No preview available
                </div>
              `
          }
        </a>

        <!-- Footer -->
        <div class="mt-auto px-4 py-3 bg-gray-50 text-xs text-gray-500 flex justify-between">
          <span>${r.file_type.toUpperCase()}</span>
          <span>TimeBank</span>
        </div>

      </div>
    `).join("");
  });
</script>
<!-- FOOTER -->
<footer class="text-center text-gray-500 py-6">
  Â© 2026 TimeBank | SkillShare Platform
</footer>

</body>
</html>
